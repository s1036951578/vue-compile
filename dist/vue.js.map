{"version":3,"file":"vue.js","sources":["../src/compiler/index.js","../src/utils/index.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\n\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\n\nexport function compileFunction(template) {\n  let ast = parstHTML(template);\n  let code = formatting(ast);\n\n  let render = new Function(`with(this){${code}}`);\n  console.log(render);\n}\n\n// 格式化\nfunction formatting(ast) {\n  // 解析格式\n  // https://template-explorer.vuejs.org\n  // return _c('div', {\n  //    attrs: {\n  //      \"id\": \"app\"\n  //    }\n  //  }, [_v(_s(msg))])\n  let code = '';\n  code = `_c(${ast.tag},{attr:${JSON.stringify(formaAttrs(ast.attr))}},${\n    ast.children.length ? JSON.stringify(formatChild(ast.children)) : '[]'\n  })`;\n  return code;\n}\n\n// 格式化child\nfunction formatChild(child) {\n  let cus = [];\n  child.map((item) => {\n    // 元素类型\n    if (item.type === 1) {\n      cus.push(formatting(item));\n    }\n    // 文本\n    if (item.type === 2) {\n      if (defaultTagRE.test(item.content)) {\n        let content = item.content;\n        let reg = null;\n        let str = [];\n        let index = (defaultTagRE.lastIndex = 0);\n\n        //   匹配到{{xxx}} 并拿到lastIndex下标\n        while ((reg = defaultTagRE.exec(content))) {\n          const currIndex = reg.index;\n\n          if (currIndex > index) {\n            let start = content.slice(index, currIndex);\n            str.push(JSON.stringify(start));\n          }\n          str.push(`_s(${JSON.stringify(reg[1].trim())})`);\n          index = currIndex + reg[0].length;\n        }\n        // {{xxxx}} xxxx 截取后 后面还有数据但是正则不匹配 进入字符串截取\n        if (index < content.length) {\n          let end = content.slice(index);\n          str.push(JSON.stringify(end));\n        }\n        cus.push(`_v(${str.join('+')})`);\n      } else {\n        cus.push(`_v(${JSON.stringify(item.content)})`);\n      }\n    }\n  });\n  return cus;\n}\n\n// 格式化属性\nfunction formaAttrs(attr) {\n  if (!attr.length) return {};\n  let attobj = {};\n  let s = attr.map((item) => {\n    let sp = item.split('=');\n    attobj[sp[0]] = sp[1];\n  });\n  return JSON.stringify(attobj);\n}\n\nfunction parstHTML(html) {\n  let arr = [];\n  let root = null;\n  function createASTElement(tag, attr, parent) {\n    return {\n      tag,\n      attr,\n      type: 1,\n      parent,\n      children: [],\n    };\n  }\n\n  let elobj = {\n    tag: null,\n    type: null,\n    attr: [],\n    text: null,\n    parent: null,\n    children: [],\n  };\n  while (html) {\n    let i = html.indexOf('<');\n\n    if (i === 0) {\n      let match;\n      if ((match = html.match(startTagOpen))) {\n        elobj.tag = match[1];\n        elobj.type = 1;\n        substr(match[0].length);\n        let attr;\n        let box = [];\n        // 多属性\n        while ((attr = html.match(attribute))) {\n          elobj.attr.push(attr[0]);\n          box.push(attr[0]);\n          substr(attr[0].length);\n        }\n        // 当前节点的父节点\n        let parent = arr[arr.length - 1];\n        let element = createASTElement(match[1], box, parent);\n        if (!root) {\n          root = element;\n        }\n        if (parent) {\n          element.parent = parent;\n          parent.children.push(element);\n        }\n        arr.push(element);\n      }\n\n      // console.log(createASTElement(match, box));\n\n      // if ((attr = html.match(attribute))) {\n      // }\n\n      let endclose;\n      if ((endclose = html.match(startTagClose))) {\n        substr(endclose[0].length);\n      }\n\n      let endtag;\n      if ((endtag = html.match(endTag))) {\n        arr.pop();\n        substr(endtag[0].length);\n      }\n    }\n    if (i > 0) {\n      let strtext = html.substring(0, i);\n      let parent = arr[arr.length - 1];\n      parent.children.push({\n        type: 2,\n        content: strtext,\n      });\n      elobj.text = strtext;\n      substr(strtext.length);\n    }\n  }\n  return root;\n  function substr(length) {\n    html = html.substring(length);\n  }\n}\n","export function isFunction(item) {\n  return typeof item === 'function';\n}\n\nexport function isObject(object) {\n  return Object.prototype.toString.call(object) === '[object Object]';\n}\n\nexport function isArray(object) {\n  return Object.prototype.toString.call(object) === '[object Array]';\n}\n","import { isArray, isObject } from '../utils';\n\nlet oldArrayPrototype = Array.prototype;\n\nconst methods = [\n  'push',\n  'splice',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n];\n\nlet newArrayPrototype = Object.create(oldArrayPrototype);\nmethods.map((item) => {\n  newArrayPrototype[item] = function (...arg) {\n    oldArrayPrototype[item].call(this, ...arg);\n\n    let obList = null;\n    // 添加数组的元素 添加劫持\n    if (item === 'splice') {\n      obList = arg.slice(2);\n    }\n    if (item === 'push' || item === 'unshift') {\n      obList = arg;\n    }\n    const ob = this.__ob__;\n    obList && ob.observeArray(obList);\n  };\n});\n\nexport default newArrayPrototype;\n","import { isArray, isObject } from '../utils';\nimport newArrayPrototype from './array';\n\nclass Observer {\n  constructor(data) {\n    //  if (!isObject(data)) return;\n    if (isArray(data)) {\n      this.observeArray(data);\n    } else if (isObject(data)) {\n      console.log(data);\n      this.walk(data);\n    }\n  }\n\n  walk(data) {\n    Object.keys(data).map((item) => {\n      if (isObject(data[item])) {\n        this.walk(data[item]);\n      }\n      if (isArray(data[item])) {\n        data[item].__proto__ = newArrayPrototype;\n        data[item].__ob__ = this;\n      } else {\n        defineReactive(data, item, data[item]);\n      }\n    });\n  }\n\n  observeArray(value) {\n    value.map((item) => {\n      new Observer(item);\n    });\n  }\n}\nfunction defineReactive(obj, key, val) {\n  //   console.log(obj, key, val);\n  Object.defineProperty(obj, key, {\n    get() {\n      return val;\n    },\n    set(newVal) {\n      if (newVal !== val) {\n        //   console.log(val, newVal);\n        val = newVal;\n        if (isArray(newVal)) {\n          val.__proto__ = newArrayPrototype;\n          val.__ob__ = new Observer();\n        }\n      }\n    },\n  });\n}\n\nexport default Observer;\n","import Observer from './observe/index';\nimport { isFunction } from './utils/index';\n\nexport function initState(vm) {\n  if (vm.$options.data) {\n    initData.call(vm, vm.$options.data);\n  }\n}\n// 数据代理\nfunction proxy(obj, key, tag) {\n  Object.defineProperty(obj, key, {\n    set(newVal) {\n      obj[tag][key] = newVal;\n    },\n    get() {\n      return obj[tag][key];\n    },\n  });\n}\n\nfunction initData(data) {\n  this._data = data = isFunction(data) ? data.call(this) : data;\n  Object.keys(data).map((item) => {\n    proxy(this, item, '_data');\n  });\n  new Observer(data);\n}\n","import { compileFunction } from './compiler';\nimport { initState } from './state';\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    // 初始化数据\n    initState(vm);\n    let template = null;\n    //  if (vm.$options.template) {\n    //    // console.log('挂载逻辑');\n    //    template = vm.$options.template;\n    //  }\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    let template = document.querySelector(el).outerHTML;\n    compileFunction(template);\n  };\n}\n","import { initMixin } from './init';\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\n\nexport default Vue;\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","compileFunction","template","ast","parstHTML","code","formatting","render","Function","console","log","tag","JSON","stringify","formaAttrs","attr","children","length","formatChild","child","cus","map","item","type","push","test","content","reg","str","index","lastIndex","exec","currIndex","start","slice","trim","end","join","attobj","sp","split","html","arr","root","createASTElement","parent","elobj","text","i","indexOf","match","substr","box","element","endclose","endtag","pop","strtext","substring","isFunction","isObject","object","Object","prototype","toString","call","isArray","oldArrayPrototype","Array","methods","newArrayPrototype","create","arg","obList","ob","__ob__","observeArray","Observer","constructor","data","walk","keys","__proto__","defineReactive","value","obj","key","val","defineProperty","get","set","newVal","initState","vm","$options","initData","proxy","_data","initMixin","Vue","_init","options","el","$mount","document","querySelector","outerHTML"],"mappings":"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"}